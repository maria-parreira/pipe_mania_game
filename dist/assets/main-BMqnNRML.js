(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))l(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&l(o)}).observe(document,{childList:!0,subtree:!0});function s(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function l(t){if(t.ep)return;t.ep=!0;const i=s(t);fetch(t.href,i)}})();class n{rows;cols;cellSize;cells;constructor(e,s,l){this.rows=e,this.cols=s,this.cellSize=l,this.cells=[],this.initializeGrid()}initializeGrid(){let e=0;for(let s=0;s<this.rows;s++){const l=[];for(let t=0;t<this.cols;t++){const i=e===8;l.push({pipe:null,blocked:i,water:!1})}this.cells.push(l)}}draw(e){e.clearRect(0,0,this.cols*this.cellSize,this.rows*this.cellSize);for(let s=0;s<this.rows;s++)for(let l=0;l<this.cols;l++){const t=this.cells[s][l],i=l*this.cellSize,o=s*this.cellSize;t.blocked&&(e.fillStyle="gray",e.fillRect(i,o,this.cellSize,this.cellSize)),t.pipe&&t.pipe.draw(e,i,o,this.cellSize),t.water&&(e.fillStyle="rgba(0, 0, 255, 0.5)",e.fillRect(i+10,o+10,this.cellSize-20,this.cellSize-20)),e.strokeStyle="black",e.strokeRect(i,o,this.cellSize,this.cellSize)}}placePipe(e,s,l){return this.cells[e][s].blocked||this.cells[e][s].pipe?!1:(this.cells[e][s].pipe=l,!0)}}const c={rows:7,cols:9,cellSize:60,selectedCell:{row:0,col:0}};class a{canvas;ctx;queueContainer;gameStatus;grid=new n(0,0,0);selectedCell={row:0,col:0};constructor(e,s,l){this.canvas=e,this.ctx=e.getContext("2d"),this.queueContainer=s,this.gameStatus=l,this.canvas.width=c.cols*c.cellSize,this.canvas.height=c.rows*c.cellSize,this.addEventListeners()}startGame(){this.grid=new n(c.rows,c.cols,c.cellSize),this.updateQueue(),this.drawGame(),this.gameStatus.textContent="Game started. Build your path!"}drawGame(){console.log("Desenhando o jogo..."),this.grid.draw(this.ctx),this.ctx.strokeStyle="red",this.ctx.lineWidth=3,this.ctx.strokeRect(c.selectedCell.col*c.cellSize,c.selectedCell.row*c.cellSize,c.cellSize,c.cellSize)}updateQueue(){this.queueContainer.innerHTML="Pipe queue..."}addEventListeners(){this.canvas.addEventListener("click",e=>{const s=this.canvas.getBoundingClientRect(),l=e.clientX-s.left,t=e.clientY-s.top;this.selectedCell.col=Math.floor(l/c.cellSize),this.selectedCell.row=Math.floor(t/c.cellSize),this.drawGame()})}}document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("gameCanvas"),e=document.getElementById("pipe-queue"),s=document.getElementById("game-status");new a(r,e,s).startGame()});
